Prefect 2.0 Integration Todo List
Setup and Configuration
[ ] Add Prefect dependencies to requirements.txt
[ ] Create Prefect configuration file (config/prefect_config.py)
[ ] Set up environment variables for Prefect connection
Core Task Development
[ ] Implement data loading tasks (src/flows/tasks/data_tasks.py)
[ ] Create inference tasks for primary and refined LLM calls (src/flows/tasks/inference_tasks.py)
[ ] Develop evaluation tasks using Hugging Face (src/flows/tasks/evaluation_tasks.py)
[ ] Build optimizer task for prompt refinement (src/flows/tasks/optimization_tasks.py)
[ ] Implement logging and decision tasks (src/flows/tasks/logging_tasks.py)
Main Workflow Implementation
[ ] Create the main optimization flow (src/flows/prompt_optimization_flow.py)
[ ] Implement proper artifact creation and tracking
[ ] Add early stopping and state management logic
[ ] Implement error handling and retry mechanisms
Deployment Setup
[ ] Create deployment script (scripts/create_prefect_deployment.py)
[ ] Develop agent startup script (scripts/start_prefect_agent.py)
[ ] Create entrypoint script for Docker container (scripts/entrypoint.sh)
API Integration
[ ] Integrate Prefect client with experiment API endpoints
[ ] Implement experiment creation endpoint
[ ] Create experiment start/execution endpoint
[ ] Build metrics retrieval endpoint
Docker and Deployment
[ ] Update Dockerfile to support Prefect agent
[ ] Modify docker-compose.yml for multi-service setup
[ ] Create Kubernetes manifests for production deployment
Testing
[ ] Write unit tests for individual Prefect tasks
[ ] Create integration tests for the complete flow
[ ] Test API integration endpoints
[ ] Verify error handling and retry logic
Monitoring and Observability
[ ] Set up telemetry utilities
[ ] Implement custom logging decorators
[ ] Configure Prefect notifications (optional)
Documentation
[ ] Document flow parameters and configuration options
[ ] Create usage examples for API endpoints
[ ] Add deployment instructions for different environments
[ ] Write troubleshooting guide
Security
[ ] Secure Prefect API connections
[ ] Implement proper secret management for credentials
[ ] Configure appropriate IAM roles for GCP resources